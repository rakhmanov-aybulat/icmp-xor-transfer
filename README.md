# Руководство по использованию ICMP Data Transfer с шифрованием XOR

## Обзор программы

Утилита для передачи данных между компьютерами через ICMP-пакеты с шифрованием XOR:

- **client.py** - клиентская часть для отправки файлов (Windows)
- **server.py** - серверная часть для приема файлов (Linux/Kali)
- **crypto.py** - модуль шифрования/дешифрования

## Настройка окружения

### Необходимая конфигурация:

1. **Клиент**: Windows (требуются права администратора)
2. **Сервер**: Linux/Kali Linux (требуются права root)
3. **Python**: версия 3.6 или выше на обоих компьютерах

## Настройка и использование

### 1. Настройка сети

1. Настройте сетевое подключение так, чтобы клиент и сервер находились в одной сети
2. Определите IP-адрес сервера (Linux):
   ```bash
   ip addr show
   ```
   Запомните IP-адрес сетевого интерфейса (eth0 или другого)

### 2. Установка на сервере (Linux/Kali)

1. Создайте директорию для программы:

   ```bash
   mkdir -p ~/icmp-transfer
   cd ~/icmp-transfer
   ```

2. Скопируйте файлы server.py и crypto.py на сервер:

   - Через USB-накопитель
   - Из общей сетевой папки
   - Через любой другой удобный способ

3. Создайте директорию для полученных файлов:

   ```bash
   mkdir -p ~/received_files
   ```

4. Настройте права доступа:
   ```bash
   chmod +x server.py
   chmod +x crypto.py
   ```

### 3. Запуск серверной части

1. Запустите сервер с правами root:

   ```bash
   sudo python3 server.py КЛЮЧ -o ~/received_files
   ```

   Где `КЛЮЧ` - это секретный ключ шифрования (например, "secret123")

2. Сервер запустится и будет ожидать входящие ICMP-пакеты:
   ```
   Сервер запущен. Ожидание входящих ICMP-пакетов...
   Файлы будут сохранены в директорию: ~/received_files
   Таймаут ожидания: 300 секунд
   ```

### 4. Запуск клиентской части (Windows)

1. Откройте командную строку с правами администратора (нажмите Win+X и выберите "Command Prompt (Admin)" или "PowerShell (Admin)")

2. Перейдите в директорию с программой:

   ```cmd
   cd путь\к\папке\с\программой
   ```

3. Отправьте файл на сервер:

   ```cmd
   python client.py путь\к\файлу IP_СЕРВЕРА КЛЮЧ
   ```

   Например:

   ```cmd
   python client.py test.txt 192.168.1.100 secret123
   ```

4. Наблюдайте за процессом передачи:
   ```
   Начинаем передачу файла test.txt размером 123 байт к 192.168.1.100
   Отправлены метаданные файла: test.txt, размер: 123 байт
   Всего блоков для отправки: 1
   Отправлен блок 1/1, размер: 123 байт
   Отправка файла завершена
   Файл успешно отправлен
   ```

### 5. Проверка результатов

На сервере в директории `~/received_files` вы найдете полученный файл.

## Дополнительные опции

### Клиент (client.py)

```cmd
python client.py ФАЙЛ IP_СЕРВЕРА КЛЮЧ [-c РАЗМЕР_БЛОКА] [-t ТАЙМАУТ] [-v]
```

- `-c, --chunk-size`: размер блока данных (по умолчанию 1024 байт)
- `-t, --timeout`: таймаут ожидания ответа (по умолчанию 4 сек)
- `-v, --verbose`: детальный вывод

### Сервер (server.py)

```bash
sudo python3 server.py КЛЮЧ [-o ВЫХОДНАЯ_ДИРЕКТОРИЯ] [-t ТАЙМАУТ] [-v]
```

- `-o, --output-dir`: директория для сохранения файлов (по умолчанию ./received_files)
- `-t, --timeout`: таймаут ожидания пакетов (по умолчанию 300 сек)
- `-v, --verbose`: детальный вывод

